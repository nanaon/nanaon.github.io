---
title: 2022년 1월 TIL
date: "2022-02-02T18:30:00"
template: "post"
draft: false
slug: "til143"
category: "til"
tags:
  - "til"
description: "2022년 1월에 한 것"
socialImage: "/naon.png"
---

주별로 TIL 쓴다고 했으면서 바로 까먹고 있다가 불현듯 생각나서 허겁지겁 1월에 했던 것을 쓴다.

## 결제 쪽 버그 픽스 킵고잉

주문번호가 제대로 생성이 안 된 채로 pg사 결제로 넘어가버리는 일이 왕왕 발생했다. 한 번 손보긴 했는데 충분한 방어가 아니었는지 아니면 헛다리를 짚었던 건지 여전히 같은 문제가 종종 발생. 클라이언트에서 토큰 쪽 예외처리를 좀 더 꼼꼼하게 해주었다.

안드로이드 앱에서 특정 상품 결제가 안 되는 이슈가 발생했다. 해결하고 보니 pg사 관련 parameter를 받는 데에 뭔가 변화가 생겼던 모양인데... 기존에 잘 돌아가던 게 안 되니까 무엇을 봐야할지 어려웠던 문제.

## 간편로그인 배포

일단 배포는 했고, 곧 로그인 프로세스 손 볼 예정.

## 댓글 시스템 설계 및 백엔드 개발

graphql과 dynamodb를 사용해 댓글 시스템 백엔드를 만들었다.

여러 영역에서 댓글을 사용할 수 있도록 유연하게 + 확장성 있게 설계하는 것을 우선 고려했고, 다음으로는 댓글과 대댓글을 어떻게 구분하고 관리할 것인지 고심했다.

아직도 낯선 graphql과 dynamodb를 사용해야 하는 것이 큰 부담이었고, 실제로 지이이이이이인짜 많이 헤맸다. 동료에게 거의 눈물로 매달리며 어찌어찌 무언가를 만들어내긴 했다. 댓글과 대댓글을 같은 resolver로 관리하면서도 계층을 구분할 수 있게 설계가 되었어야 하는데, 이 부분이 조금 헷갈려서 리뷰 후 많이 뜯어고쳤다. 작업하면서 일반적인 댓글 시스템에 대해 생각해보고 배울 수 있었다.

## AWS SAA 강의 시작

시간을 쪼개서 조금씩 듣고 있다. 진짜로 시간을 쪼개서 들어야 하는 형편이라 진도 나가는 게 다소 지루한 것이 문제다.