---
title: 컴퓨터 네트워크 강의 - 3장. 네트워크 기술 (3) 인터네트워킹
date: "2020-12-20T17:40:32"
template: "post"
draft: false
slug: "til80"
category: "network"
tags:
  - "til"
  - "network"
description: "인터네트워킹"
socialImage: "/naon.png"
---

### 3장. 네트위크 기술
#### (3) 인터네트워킹

##### 인터네트워킹 개요
- 인터네트워킹
  - 둘 이상의 네트워크를 연결하는 기능
  - 서로 다른 프로토콜을 변환해서 연결함 (통역사)

![게이트웨이 역할](/media/network04.png)
<center>게이트웨이의 역할</center>

- **게이트웨이**
  - 동작은 프록시와 유사하나, 그 다음에 있는 서버가 HTTP 서버 이외의 서비스를 제공하는 서버가 됨
  - 클라이언트 <- HTTP 통신 -> 게이트웨이 <- HTTP 이외 통신 -> HTTP 이외 서버
  - **네트워크 계층보다 상위 계층에서 분석, 처리하는 경우**

- (참고) 프록시
  - 서버 - 클라이언트 중계 프로그램
  - 클라이언트 -- request --> 서버
  - 서버 <-- response -- 클라이어언트
  - 프록시 목적
    - 캐시를 사용해 네트워크 대역 등을 효율적으로 사용
    특정 웹사이트 액세스 제한, 액세스 로그 획득

- **라우터**
  - 네트워크를 연결하는 장비
  - 일반적으로 **계층 3 기능(주소, 경로 설정)을 수행**

- **브리지**
  - 목적지 주소가 같은 네트워크에 속했다면 아무런 행동도 하지 않음
  - **서로 다른 네트워크에 해당하면 중계 기능 수행**
  
- **리피터**
  - 약해진 신호 증폭
  - 잡음과 신호를 함께 증폭하므로 리피터로 무한정 증폭하는 것은 불가능

##### 브리지
![브리지 역할](/media/network05.png)

- 좌우에 위치하는 **LAN이 같은 종류일 때는 프레임 헤더만 해석 후 중계**
- **LAN이 다른 종류일 때는 LAN 1 헤더 해석 후 제거하고, LAN 2 헤더를 붙여 중계**
- (참고) '프레임'이라는 단어에서 데이터링크 계층임을 유추 가능
- 동작 방식에 따른 브리지 분류
  - **트랜스페런트(transparent) 브리지**
      - 사용자에게 투명: 송신 호스트는 **경로에 관한 내용을 알 필요가 없고, 브리지가 자동으로 수행**
      - 임의의 LAN으로부터 프레임이 도착하는 경우
          - 수신 호스트와 송신 호스트가 동일한 방향일 때: 무시
          - 다른 방향일 때: 중계
          - (아래 그림 참고) a -> b는 같은 LAN 1이므로 무시
          - a -> c는 브리지 B1이 포트 1로 받아서 2로 중계
          - a -> e는 브리지 B1이 포트 1로 받아서 3으로 중계
![브리지를 이용한 LAN 연결](/media/network06.png)
      - LAN이 동작하면서 자동으로 생성되나, 초기화하는 경우 **플러딩(flooding)** 사용
      - 플러딩: 프레임이 들어온 포트를 제외한 다른 모든 포트로 전달
      - 이렇게 들어온 프레임의 송신 주소를 바탕으로(=출발지 주소를 기억해서) 특정 주소가 어드 포트 뒤에 있는지 학습하는데, 이를 **역방향 학습(backward learning)**이라 함
      - 호스트 위치가 변동되는 경우 최근 정보로 수정 필요
![이중 경로에 의한 잘못된 라우팅 정보](/media/network07.png)
      - **스패닝(spanning) 트리**
          - 최근에는 보안상, 안전상 물리적 이중 경로로 설계하기도 함. 이때 논리적으로도 이중 경로가 될 경우 위 그림처럼 잘못된 라우팅 정보를 얻을 수 있음
          - 브리지 B1 입장에서는 a를 포트 1로 보내야 할지 2로 보내야 할지 판단하기 어려운 상황에 봉착
          - 따라서 논리적 연결 상태를 비순환 형태로 구성해야 함
          - 이를 스패닝 트리라 하며, 이중 경로가 존재하지 않도록 최상위 브리지를 루트로 설정하고, 다른 브리지에 이르는 최단 경로 트리를 구성
  - **소스 라우팅(source routing) 브리지**
      - 송신 호스트가 수신 호스트에 이르는 **경로 정보를 제공**

##### IP 인터네트워킹
![IP 인터네트워킹 구조](/media/network08.png)
- 송신 호스트 이더넷 -> 라우터 A에서 이더넷을 PPP로 변환 -> 라우터 B에서 PPP를 ATM으로 변환 -> 수신 호스트 ATM

![IP 인터네트워킹 헤더 변환](/media/network09.png)
- 라우터 A
    - 이더넷과 PPP 지원
    - 이더넷 헤더 제거 후 PPP 헤더로 변환
- 라우터 B
    - PPP와 ATM 지원
    - PPP 헤더 제거 후 ATM 헤더로 변환

##### 인터넷 라우팅
- **고정 경로 배정**
    - 송신 호스트와 수신 호스트 사이에 **영구 불변 경로 배정**
    - 송수신 호스트 사이 **트래픽을 측정(예측)하여 적절히 배정**
    - **간단한 구현**으로 **효과적인 경로 설정** 가능
    - 하지만 **트래픽 변화에 따른 동적 경로 배정 불가능**
- 라우터로 네트워크를 구성한 예
![라우터로 네트워크를 구성한 예](/media/network10.png)

- **적응 경로 배정**
    - 인터넷 **연결 상태가 변하면 이를 전달경로에 반영**
        - 특정 네트워크나 라우터가 정상 동작하지 않는 경우
        - 네트워크 특정 위치에서 혼잡이 발생한 경우
    - **경로 결정 과정이 복잡**하고 이를 처리하는 **라우터 부담이 증가**
    - 네트워크 변화를 모든 라우터에 **동시에 반영하기는 불가능**하므로 **정보의 불일치** 발생 가능

- **자율 시스템**
    - **다수 라우터**로 구성되며, **공통 라우팅 프로토콜**을 사용해 정보 교환
    - 동일한 라우팅 특성에 의해 동작하는 **논리적 단일 구성체**
    - **내부 라우팅 프로토콜**
        - 자율 시스템 내부에서 사용하는 공통 프로토콜
        - RIP(Routing Information Protocol)
        - OSPF(Open Shortest Path First)
    - **외부 라우팅 프로토콜**
        - **자율 시스템간 사용**하는 라우팅 프로토콜
        - BGP(Border Gateway Protocol)