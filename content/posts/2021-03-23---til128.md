---
title: 라우터로 SPA 만들기
date: "2021-03-23T22:33:32"
template: "post"
draft: true
slug: "til128"
category: "react"
tags:
  - "til"
  - "react"
description: ""
socialImage: "/naon.png"
---

### 라우팅 방식
- 브라우저에 의한 라우팅
  - HTML로만 웹페이지를 구성했을 때 사용하던 전통적인 방법
  - `<a>` 태그를 활용하거나, JavaScript에서 location.href 속성을 활용해 페이지 이동
- JavaScript 단에서 라우팅 흉내내기
  - 화면 구성 후, 그 화면 콘텐츠에 맞게 주소창 주소를 임의로 변경(부여)하는 방식
  - 리액트는 SPA 방식으로 개발하는 것이 보다 적합
  - `react-router-dom` 라이브러리 활용

### BrowserRouter, Link, Route 써보기

리액트에서 SPA 방식으로 웹페이지를 구현하려면 `<a>` 태그는 사용하면 안 된다. `<a>`태그를 쓰면 페이지 이동 개념이라 페이지 전체가 다시 새로 렌더링되므로 SPA 조건에 위배된다.

`<a>`태그를 썼을 때 정말 페이지 전체가 다시 그려지는지 확인해보자.

메인화면, about 페이지, about company 페이지, profile 페이지, blog 페이지로 구성된 웹사이트를 만들었다. 각 페이지는 별도 컴포넌트로 만들었다.

```js
import React from "react";

const App = () => {
  return (
    <div>
      <h1>App10</h1>
      <ul>
        <li>
          <a href="/about/">about</a>
        </li>
        <li>
          <a href="/about/company/">about company</a>
        </li>
        <li>
          <a href="/profile/">profile</a>
        </li>
        <li>
          <a href="/blog/">blog</a>
        </li>
      </ul>

      <AboutPage />
      <ProfilePage />
      <BlogPage />

    </div>
  );
};

// /about/
const AboutPage = () => {
  return (
    <div>
      <h2>About Page</h2>
    </div>
  );
};

// /about/company/
const AboutCompanyPage = () => {
  return (
    <div>
      <h2>About Company Page</h2>
    </div>
  );
};

// /profile/
const ProfilePage = () => {
  return (
    <div>
      <h2>Profile Page</h2>
    </div>
  );
};

// /blog/
const BlogPage = () => {
  return (
    <div>
      <h2>Blog Page</h2>
    </div>
  );
};

export default App;
```

![a 태그 썼을 때 페이지 새로 렌더링](/media/til128-1.gif)

파비콘을 보면 페이지 전체가 새로 그려지고 있다는 걸 알 수 있다.

BrowserRouter, Link, Route를 사용해 SPA를 구현해보자. 우선 react-router-dom 패키지를 설치한다.

```
yarn add react-router-dom
```

<br>

Link, Route는 반드시 BrowserRouter 안에서 써야한다. BrowserRouter가 context API를 통해 현재 라우팅 정보를 전달하기 때문이다.

`<BrowserRouter></BrowserRouter>`는 보통 앱 최상위에서 감싸준다.

```js
import React from "react";
import { BrowserRouter, Link, Route } from "react-router-dom";

const App = () => {
  return (
    <BrowserRouter>
      <div>
        <h1>App10</h1>
        <ul>
          <li>
            <Link to="/about/">about</Link>
          </li>
          <li>
            <Link to="/about/company/">about company</Link>
          </li>
          <li>
            <Link to="/profile/">profile</Link>
          </li>
          <li>
            <Link to="/blog/">blog</Link>
          </li>
        </ul>

        <Route path="/about/" component={ AboutPage } />
        <Route path="/about/company/" component={ AboutCompanyPage } />
        <Route path="/profile/" component={ ProfilePage } />
        <Route path="/blog/" component={ BlogPage } />

      </div>
    </BrowserRouter>
  );
};

// /about/
const AboutPage = () => {
  return (
    <div>
      <h2>About Page</h2>
    </div>
  );
};

// /about/company/
const AboutCompanyPage = () => {
  return (
    <div>
      <h2>About Company Page</h2>
    </div>
  );
};

// /profile/
const ProfilePage = () => {
  return (
    <div>
      <h2>Profile Page</h2>
    </div>
  );
};

// /blog/
const BlogPage = () => {
  return (
    <div>
      <h2>Blog Page</h2>
    </div>
  );
};

export default App;
```

![BrowserRouter, Link, Route 사용 예시](/media/til128-2.gif)

그런데 `/about/company/` 페이지에서 about 컴포넌트와 about company 컴포넌트가 모두 리턴된다. Route는 매칭되는 모든 컴포넌트가 이어서 렌더링 되기 때문인데, 주소가 `/about/` 이라는 조건에 부합하므로 두 컴포넌트가 모두 리턴되는 것이다.

필요한 컴포넌트만 렌더링하기 위해 정확히 일치할 때만 리턴하는 `exact` 속성을 추가한다. (기본값 `exact={true}`)

```js
<Route exact path="/about/" component={ AboutPage } />
<Route exact path="/about/company/" component={ AboutCompanyPage } />
<Route exact path="/profile/" component={ ProfilePage } />
<Route path="/blog/" component={ BlogPage } />
```

`/blog/post/1`, `blog/post/2` 이렇게 주소가 계속 뒤에 붙는 경우는 exact를 붙이지 않는 것이 맞다.