{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/til42","result":{"data":{"markdownRemark":{"id":"3607d91f-96e9-5545-b7ee-49d348ed3ff6","html":"<ol start=\"0\">\n<li>mysql 실행</li>\n</ol>\n<p><code class=\"language-text\">mysql -u root -p</code></p>\n<br>\n<ol>\n<li>mysql DB 생성</li>\n</ol>\n<p><code class=\"language-text\">CREATE DATABASE DB명 CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;</code></p>\n<br>\n<ol start=\"2\">\n<li>conda 가상 환경 설정</li>\n</ol>\n<p><code class=\"language-text\">conda create -n 가상환경명 python=3.8</code></p>\n<br>\n<ol start=\"3\">\n<li>가상 환경 실행</li>\n</ol>\n<p><code class=\"language-text\">conda activate 가상환경명</code></p>\n<br>\n<ol start=\"4\">\n<li>장고 설치</li>\n</ol>\n<p><code class=\"language-text\">pip install django</code></p>\n<br>\n<ol start=\"5\">\n<li>mysql client 설치</li>\n</ol>\n<p><code class=\"language-text\">pip install mysqlclient</code></p>\n<br>\n<ol start=\"6\">\n<li>기타 필요한 프로그램 설치</li>\n</ol>\n<br>\n<ol start=\"7\">\n<li>프로젝트 만들기</li>\n</ol>\n<p><code class=\"language-text\">django-admin startproject 프로젝트명</code></p>\n<br>\n<ol start=\"8\">\n<li>git ignore 설정\ngitignore.io에서 django, python, macos 추가하고 파일 받아오기</li>\n</ol>\n<br>\n<ol start=\"9\">\n<li>manage.py 있는 디렉토리(=프로젝트 디렉토리)에서 .gitignore 생성 후 붙여넣기</li>\n</ol>\n<p><code class=\"language-text\">vi .gitignore</code></p>\n<br>\n<ol start=\"10\">\n<li>.gitignore 파일에 설정 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">### Django ###</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nmy_settings<span class=\"token punctuation\">.</span>py\n<span class=\"token operator\">*</span><span class=\"token punctuation\">.</span>csv</code></pre></div>\n<br>\n<ol start=\"11\">\n<li>같은 디렉토리에서 my_settings.py 만들어서 DB 정보와 시크릿키 정보 저장</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'default'</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'ENGINE'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.db.backends.mysql'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'DATABASE 명'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'USER'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'DB접속 계정명'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># root</span>\n    <span class=\"token string\">'PASSWORD'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'DB접속용 비밀번호'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'HOST'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'실제 DB 주소'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 로컬에서만 작업할 거면 localhost 입력</span>\n    <span class=\"token string\">'PORT'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'포트번호'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 3306</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nSECRET <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'secret'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'시크릿키'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 프로젝트 메인 폴더 안 settings.py에서 확인</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>DB 계정 정보와 암호화, 복호화 시 사용하는 시크릿키는 외부에 노출되면 안 되므로 별도 세팅 파일에 작성한 후 github에 올라가지 않도록 한다. 7~9번 작업이 이것을 위한 것.</p>\n</blockquote>\n<br>\n<ol start=\"12\">\n<li>settings.py에서 시크릿키값 숨기기 및 DB 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">import</span> my_settings\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nSECRET_KEY <span class=\"token operator\">=</span> my_settings<span class=\"token punctuation\">.</span>SECRET<span class=\"token punctuation\">[</span><span class=\"token string\">'secret'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nDATABASES <span class=\"token operator\">=</span> my_settings<span class=\"token punctuation\">.</span>DATABASES\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br>\n<ol start=\"13\">\n<li>settings.py의 INSTALLED_APP과 MIDDLEWARE에서 admin, csrf 관련 항목 주석처리</li>\n</ol>\n<br>\n<ol start=\"14\">\n<li>3000포트(프론트)에서도 접속할 수 있도록 cors 설치</li>\n</ol>\n<p><code class=\"language-text\">pip install django-cors-headers</code></p>\n<br>\n<ol start=\"15\">\n<li>settings.py INSTALLED_APP과 MIDDLEWARE에 항목 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t\t<span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">'corsheaders'</span>\n<span class=\"token punctuation\">]</span>\n\nMIDDLEWARE <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t\t<span class=\"token string\">'corsheaders.middleware.CorsMiddleware'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<ol start=\"16\">\n<li>settings.py 가장 아래에 cors 허용값 입력</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">##CORS</span>\nCORS_ORIGIN_ALLOW_ALL<span class=\"token operator\">=</span><span class=\"token boolean\">True</span>\nCORS_ALLOW_CREDENTIALS <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\nCORS_ALLOW_METHODS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'DELETE'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'PATCH'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'PUT'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nCORS_ALLOW_HEADERS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'accept'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'accept-encoding'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'authorization'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'content-type'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'dnt'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'origin'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'user-agent'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'x-csrftoken'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'x-requested-with'</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token comment\">#만약 허용해야할 추가적인 헤더키가 있다면?(사용자정의 키) 여기에 추가하면 됩니다.</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<ol start=\"17\">\n<li>외부에서도 접속 가능하도록 settings.py ALLOWED_HOSTS 설정 변경</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nALLOWED_HOSTS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br>\n<ol start=\"18\">\n<li>서버가 잘 돌아가는지 확인</li>\n</ol>\n<p><code class=\"language-text\">mysql.server start</code></p>\n<p><code class=\"language-text\">python manage.py runserver 0:포트번호</code></p>\n<p>포트번호는 보통 8000이며, 외부 접속용으로 서버를 띄울 땐 포트번호 앞에 <code class=\"language-text\">0:</code>를 붙어야 한다.</p>","fields":{"slug":"/posts/til42","tagSlugs":["/tag/til/","/tag/django/","/tag/wecode/"]},"frontmatter":{"date":"2020-06-19T19:54:32.160Z","description":"장고 프로젝트 진행 전 해야할 초기 세팅","tags":["til","django","wecode"],"title":"django - 장고 프로젝트 초기 세팅","socialImage":"/naon.png"}}},"pageContext":{"slug":"/posts/til42"}}}